---
title: "Refer√™ncia da API"
description: "Documenta√ß√£o completa de todos os endpoints da API StylePay"
---

## Base URL

Todas as requisi√ß√µes da API devem ser feitas para:

```
https://api.stylepay.com.br
```

## Autentica√ß√£o

Todas as requisi√ß√µes requerem autentica√ß√£o via headers customizados:

```bash
stpi: seu_client_id
stps: seu_client_secret
```

<Card title="Como autenticar" icon="key" href="/authentication">
  Veja o guia completo de autentica√ß√£o
</Card>

---

## Endpoints Dispon√≠veis

### üí∞ Gateway PIX

Endpoints para criar e gerenciar cobran√ßas e pagamentos PIX.

<CardGroup cols={2}>
  <Card
    title="Gerar QR Code PIX"
    icon="qrcode"
    href="/gerar-qrcode-pix"
  >
    `POST /api/v1/gateway/request-qrcode`
    
    Cria uma cobran√ßa PIX e gera o QR Code para pagamento
  </Card>
  
  <Card
    title="Realizar Pagamento PIX"
    icon="paper-plane"
    href="/pagamento-pix"
  >
    `POST /api/v1/gateway/pix-payment`
    
    Envia um pagamento PIX para qualquer chave
  </Card>
</CardGroup>

### üíº Wallet (Carteira)

Endpoints para gerenciamento de saldo e transa√ß√µes.

<CardGroup cols={2}>
  <Card
    title="Consultar Saldo"
    icon="wallet"
    href="/wallet"
  >
    `GET /api/v1/wallet/balance`
    
    Consulta o saldo dispon√≠vel na carteira
  </Card>
  
  <Card
    title="Hist√≥rico de Transa√ß√µes"
    icon="clock-rotate-left"
    href="/wallet"
  >
    `GET /api/v1/wallet/transactions`
    
    Lista todas as transa√ß√µes realizadas
  </Card>
</CardGroup>

### üîî Webhooks

Sistema de notifica√ß√µes em tempo real.

<Card
  title="Webhooks"
  icon="webhook"
  href="/webhooks"
>
  Configure URLs para receber notifica√ß√µes autom√°ticas sobre mudan√ßas de status em transa√ß√µes
</Card>

---

## Estrutura de Resposta

### Respostas de Sucesso

Todas as respostas bem-sucedidas retornam status HTTP `2xx`:

```json
{
  "payment_id": "550e8400-e29b-41d4-a716-446655440000",
  "qrcode": "00020126580014br.gov.bcb.pix...",
  "status": "PENDING"
}
```

### Respostas de Erro

Erros retornam status HTTP `4xx` ou `5xx` com a seguinte estrutura:

```json
{
  "statusCode": 400,
  "message": "Invalid request parameters",
  "error": "Bad Request"
}
```

#### C√≥digos de Status Comuns

<ResponseField name="200" type="OK">
  Requisi√ß√£o processada com sucesso
</ResponseField>

<ResponseField name="201" type="Created">
  Recurso criado com sucesso
</ResponseField>

<ResponseField name="400" type="Bad Request">
  Par√¢metros inv√°lidos na requisi√ß√£o
</ResponseField>

<ResponseField name="401" type="Unauthorized">
  Credenciais de autentica√ß√£o inv√°lidas ou ausentes
</ResponseField>

<ResponseField name="404" type="Not Found">
  Recurso n√£o encontrado
</ResponseField>

<ResponseField name="500" type="Internal Server Error">
  Erro interno do servidor
</ResponseField>

---

## Rate Limiting

A API StylePay implementa rate limiting para garantir estabilidade:

<Info>
  **Limite padr√£o:** 100 requisi√ß√µes por minuto por Client ID
</Info>

Quando o limite √© excedido, voc√™ receber√° uma resposta `429 Too Many Requests`:

```json
{
  "statusCode": 429,
  "message": "Rate limit exceeded",
  "error": "Too Many Requests",
  "retryAfter": 60
}
```

### Headers de Rate Limit

Todas as respostas incluem headers informativos:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640000000
```

---

## Tipos de Dados

### Valores Monet√°rios

Todos os valores monet√°rios s√£o enviados e recebidos como n√∫meros decimais em **reais (BRL)**:

```json
{
  "amount": 100.50,  // R$ 100,50
  "tax": 1.50        // R$ 1,50
}
```

<Warning>
  Sempre use ponto (`.`) como separador decimal, nunca v√≠rgula (`,`)
</Warning>

### Datas

Todas as datas seguem o formato **ISO 8601** com timezone UTC:

```json
{
  "date": "2025-01-01T10:00:00.000Z"
}
```

### Documentos

CPF e CNPJ devem ser enviados **apenas com n√∫meros**, sem pontos, tra√ßos ou barras:

```json
{
  "document": "12345678900"     // CPF
}
```

```json
{
  "document": "12345678000100"  // CNPJ
}
```

### Chaves PIX

Tipos de chave PIX aceitos:

| Tipo | Formato | Exemplo |
|------|---------|---------|
| `CPF` | 11 d√≠gitos | `12345678900` |
| `CNPJ` | 14 d√≠gitos | `12345678000100` |
| `EMAIL` | Email v√°lido | `usuario@email.com` |
| `PHONE` | +55 + DDD + n√∫mero | `+5511999999999` |
| `EVP` | UUID v4 | `550e8400-e29b-41d4-a716-446655440000` |

---

## Idempot√™ncia

Para opera√ß√µes cr√≠ticas como cria√ß√£o de pagamentos, use o campo `external_id` para garantir idempot√™ncia:

```json
{
  "amount": 100.50,
  "external_id": "pedido_123_tentativa_1"
}
```

<Tip>
  Se voc√™ enviar a mesma requisi√ß√£o com o mesmo `external_id` m√∫ltiplas vezes, apenas uma transa√ß√£o ser√° criada.
</Tip>

---

## Ambientes

### Produ√ß√£o

```
https://api.stylepay.com.br
```

<Warning>
  Este √© o ambiente de produ√ß√£o. Todas as transa√ß√µes movimentam dinheiro real.
</Warning>

---

## Bibliotecas e SDKs

Estamos trabalhando em SDKs oficiais. Por enquanto, voc√™ pode integrar usando bibliotecas HTTP padr√£o:

<CodeGroup>

```javascript JavaScript/Node.js
// Usando fetch nativo
const response = await fetch('https://api.stylepay.com.br/api/v1/endpoint', {
  method: 'POST',
  headers: {
    'stpi': process.env.STYLEPAY_CLIENT_ID,
    'stps': process.env.STYLEPAY_CLIENT_SECRET,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(data)
});
```

```python Python
# Usando requests
import requests
import os

response = requests.post(
    'https://api.stylepay.com.br/api/v1/endpoint',
    headers={
        'stpi': os.getenv('STYLEPAY_CLIENT_ID'),
        'stps': os.getenv('STYLEPAY_CLIENT_SECRET'),
        'Content-Type': 'application/json'
    },
    json=data
)
```

```php PHP
<?php
// Usando cURL
$ch = curl_init('https://api.stylepay.com.br/api/v1/endpoint');
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'stpi: ' . getenv('STYLEPAY_CLIENT_ID'),
    'stps: ' . getenv('STYLEPAY_CLIENT_SECRET'),
    'Content-Type: application/json'
]);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);
?>
```

```ruby Ruby
# Usando net/http
require 'net/http'
require 'json'

uri = URI('https://api.stylepay.com.br/api/v1/endpoint')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Post.new(uri)
request['stpi'] = ENV['STYLEPAY_CLIENT_ID']
request['stps'] = ENV['STYLEPAY_CLIENT_SECRET']
request['Content-Type'] = 'application/json'
request.body = data.to_json

response = http.request(request)
```

</CodeGroup>

---

## Webhooks

A API StylePay envia notifica√ß√µes autom√°ticas para sua aplica√ß√£o quando eventos importantes ocorrem:

<CardGroup cols={3}>
  <Card title="Cash-in" icon="arrow-down">
    Notifica√ß√µes de recebimentos
  </Card>
  <Card title="Cash-out" icon="arrow-up">
    Notifica√ß√µes de pagamentos
  </Card>
  <Card title="Refunds" icon="rotate-left">
    Notifica√ß√µes de estornos
  </Card>
</CardGroup>

<Card title="Configurar Webhooks" icon="gear" href="/webhooks">
  Veja como configurar e processar webhooks
</Card>

---

## Exemplos Pr√°ticos

### Fluxo Completo: Receber Pagamento

<Steps>
  <Step title="Criar QR Code">
    ```bash
    POST /api/v1/gateway/request-qrcode
    ```
    Gera QR Code para o cliente pagar
  </Step>

  <Step title="Cliente Paga">
    O cliente escaneia o QR Code e confirma o pagamento no app do banco
  </Step>

  <Step title="Receber Webhook">
    ```json
    {
      "event": "pix.cashin.paid",
      "statusTransaction": "PAID",
      "value": 100.50
    }
    ```
    Voc√™ recebe notifica√ß√£o autom√°tica do pagamento
  </Step>

  <Step title="Confirmar Saldo">
    ```bash
    GET /api/v1/wallet/balance
    ```
    Consulta o saldo atualizado na carteira
  </Step>
</Steps>

### Fluxo Completo: Enviar Pagamento

<Steps>
  <Step title="Verificar Saldo">
    ```bash
    GET /api/v1/wallet/balance
    ```
    Confirma que tem saldo suficiente
  </Step>

  <Step title="Enviar Pagamento">
    ```bash
    POST /api/v1/gateway/pix-payment
    ```
    Envia PIX para a chave do destinat√°rio
  </Step>

  <Step title="Receber Confirma√ß√£o">
    ```json
    {
      "event": "pix.cashout.paid",
      "statusTransaction": "PAID"
    }
    ```
    Webhook confirma que pagamento foi realizado
  </Step>
</Steps>

---

## Suporte

<CardGroup cols={3}>
  <Card title="Documenta√ß√£o" icon="book" href="/docs">
    Guias e tutoriais completos
  </Card>
  <Card title="Email" icon="envelope" href="mailto:suporte@stylepay.com.br">
    suporte@stylepay.com.br
  </Card>
  <Card title="WhatsApp" icon="whatsapp" href="https://wa.me/5511999999999">
    +55 11 9999-9999
  </Card>
</CardGroup>

---

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card
    title="Gerar QR Code PIX"
    icon="qrcode"
    href="/gerar-qrcode-pix"
  >
    Comece criando sua primeira cobran√ßa
  </Card>
  <Card
    title="Realizar Pagamento"
    icon="paper-plane"
    href="/pagamento-pix"
  >
    Aprenda a enviar pagamentos PIX
  </Card>
  <Card
    title="Consultar Saldo"
    icon="wallet"
    href="/wallet"
  >
    Gerencie o saldo da sua carteira
  </Card>
  <Card
    title="Configurar Webhooks"
    icon="webhook"
    href="/webhooks"
  >
    Receba notifica√ß√µes em tempo real
  </Card>
</CardGroup>